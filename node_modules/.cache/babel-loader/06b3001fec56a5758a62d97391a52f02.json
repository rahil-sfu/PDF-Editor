{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Desktop/PdfEditor/react-pdf-editor/src/App.js\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport './App.css';\nimport samplePDF from \"./na.pdf\";\nimport SinglePage from './Components/SinglePage';\nimport ModifyPage from './Components/ModifyPage';\nimport AutoTextArea from './Components/AutoTextArea';\nexport default function App() {\n  const [result, setResult] = useState([]);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [redoStack, setRedoStack] = useState([]);\n  const [flag, setFlag] = useState(\"\");\n  const [bounds, setBounds] = useState({});\n  const [isText, setIsText] = useState(false);\n  const [buttonType, setButtonType] = useState(\"\");\n  const tempRef = useRef(null);\n  useEffect(() => {\n    if (isText) {\n      setIsText(false);\n    }\n  }, [result]); //Keep track of current page number\n\n  const pageChange = num => {\n    setPageNumber(num);\n  }; //Function to add text in PDF\n\n\n  const addText = () => {\n    //Flag to change cursor if text\n    setIsText(true);\n    document.getElementById(\"drawArea\").addEventListener(\"click\", e => {\n      e.preventDefault();\n      setResult(result => [...result, {\n        id: generateKey(e.pageX),\n        x: e.pageX,\n        y: e.pageY - 10,\n        text: \"\",\n        page: pageNumber,\n        type: \"text\",\n        ref: tempRef\n      }]);\n    }, {\n      once: true\n    });\n  }; //Undo function for both line and text\n\n\n  const undo = () => {\n    let temp = result.pop();\n\n    if (temp) {\n      if (temp.type === \"freehand\") {\n        //Flag for DrawArea reference\n        setFlag(\"undo\");\n      }\n\n      setRedoStack(stack => [...stack, temp]);\n      setResult(result);\n    }\n  }; //Flag for DrawArea reference\n\n\n  const changeFlag = () => {\n    setFlag(\"\");\n  }; //Redo functionality\n\n\n  const redo = () => {\n    let top = redoStack.pop();\n\n    if (top) {\n      if (top.type === \"freehand\") {\n        //Flag for DrawArea reference\n        setFlag(\"redo\");\n      }\n\n      setResult(res => [...res, top]);\n    }\n  };\n\n  const getPaths = el => {\n    setResult(res => [...res, el]);\n  };\n\n  const getBounds = obj => {\n    setBounds(obj);\n  };\n\n  const generateKey = pre => {\n    return `${pre}_${new Date().getTime()}`;\n  };\n\n  const onTextChange = (id, txt, ref) => {\n    let indx = result.findIndex(x => x.id === id);\n    let item = { ...result[indx]\n    };\n    item.text = txt;\n    item.ref = ref;\n    result[indx] = item;\n    setResult(result);\n  };\n\n  const changeButtonType = type => {\n    setButtonType(type);\n  };\n\n  const resetButtonType = () => {\n    setButtonType(\"\");\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 5\n    }\n  }, result.map(res => {\n    if (res.type === \"text\") {\n      let isShowing = \"hidden\";\n\n      if (res.page === pageNumber) {\n        isShowing = \"visible\";\n      }\n\n      return /*#__PURE__*/React.createElement(AutoTextArea, {\n        key: res.id,\n        unique_key: res.id,\n        val: res.text,\n        onTextChange: onTextChange,\n        style: {\n          visibility: isShowing,\n          color: \"red\",\n          fontWeight: 'normal',\n          fontSize: 16,\n          zIndex: 20,\n          position: \"absolute\",\n          left: res.x + 'px',\n          top: res.y + 'px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 13\n        }\n      }) //<h1 key={index} style = {{textAlign: \"justify\",color: \"red\" ,fontWeight:'normal',width: 200, height: 80,fontSize: 33+'px', fontSize: 16, zIndex:10, position: \"absolute\", left: res.x+'px', top: res.y +'px'}}>{res.text}</h1>\n      ;\n    } else {\n      return null;\n    }\n  }), /*#__PURE__*/React.createElement(\"h1\", {\n    style: {\n      color: \"#3f51b5\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }\n  }, \"REACT PDF EDITOR\"), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"navbar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: undo,\n    style: {\n      marginTop: \"1%\",\n      marginBottom: \"1%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    style: {\n      fontSize: 25\n    },\n    className: \"fa fa-fw fa-undo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 82\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: redo,\n    style: {\n      marginTop: \"1%\",\n      marginBottom: \"1%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    style: {\n      fontSize: 25\n    },\n    className: \"fa fa-fw fa-redo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 82\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: addText,\n    style: {\n      marginTop: \"1%\",\n      marginBottom: \"1%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    style: {\n      fontSize: 25\n    },\n    className: \"fa fa-fw fa-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 85\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => changeButtonType(\"draw\"),\n    style: {\n      marginTop: \"1%\",\n      marginBottom: \"1%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    style: {\n      fontSize: 25\n    },\n    className: \"fa fa-fw fa-pencil\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 108\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => changeButtonType(\"download\"),\n    style: {\n      marginTop: \"1%\",\n      marginBottom: \"1%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    style: {\n      fontSize: 25\n    },\n    className: \"fa fa-fw fa-download\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 112\n    }\n  }))), /*#__PURE__*/React.createElement(SinglePage, {\n    resetButtonType: resetButtonType,\n    buttonType: buttonType,\n    cursor: isText ? \"text\" : \"default\",\n    pdf: samplePDF,\n    pageChange: pageChange,\n    getPaths: getPaths,\n    flag: flag,\n    getBounds: getBounds,\n    changeFlag: changeFlag,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(ModifyPage, {\n    resetButtonType: resetButtonType,\n    buttonType: buttonType,\n    pdf: samplePDF,\n    result: result,\n    bounds: bounds,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }\n  }));\n}","map":{"version":3,"sources":["/Users/mac/Desktop/PdfEditor/react-pdf-editor/src/App.js"],"names":["React","useState","useEffect","useRef","samplePDF","SinglePage","ModifyPage","AutoTextArea","App","result","setResult","pageNumber","setPageNumber","redoStack","setRedoStack","flag","setFlag","bounds","setBounds","isText","setIsText","buttonType","setButtonType","tempRef","pageChange","num","addText","document","getElementById","addEventListener","e","preventDefault","id","generateKey","pageX","x","y","pageY","text","page","type","ref","once","undo","temp","pop","stack","changeFlag","redo","top","res","getPaths","el","getBounds","obj","pre","Date","getTime","onTextChange","txt","indx","findIndex","item","changeButtonType","resetButtonType","map","isShowing","visibility","color","fontWeight","fontSize","zIndex","position","left","marginTop","marginBottom"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useRef} from 'react';\nimport './App.css';\nimport samplePDF from \"./na.pdf\";\nimport SinglePage from './Components/SinglePage';\nimport ModifyPage from './Components/ModifyPage';\nimport AutoTextArea from './Components/AutoTextArea';\n\nexport default function App() {\n  const [result, setResult] = useState([]);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [redoStack, setRedoStack] = useState([]);\n  const [flag, setFlag] = useState(\"\");\n  const [bounds, setBounds] = useState({});\n  const [isText, setIsText] = useState(false);\n  const [buttonType, setButtonType] = useState(\"\");\n  const tempRef = useRef(null);\n\n  useEffect(() => {\n    if(isText)\n    {\n      setIsText(false);\n    }\n  },[result])\n\n  //Keep track of current page number\n  const pageChange = (num) => {\n    setPageNumber(num);\n  }\n\n  //Function to add text in PDF\n  const addText = () => {\n    //Flag to change cursor if text\n    setIsText(true);\n    document.getElementById(\"drawArea\").addEventListener(\"click\", (e) => {\n      e.preventDefault();\n      setResult(result => [...result, {id:generateKey(e.pageX), x: e.pageX, y: e.pageY -10, text: \"\", page: pageNumber, type: \"text\", ref: tempRef}]);\n    }, { once: true });\n  }\n\n  //Undo function for both line and text\n  const undo = () => {\n    let temp = result.pop();\n    if(temp)\n    {\n      if(temp.type === \"freehand\")\n      {\n        //Flag for DrawArea reference\n        setFlag(\"undo\");\n      }\n      setRedoStack(stack => [...stack,temp]);\n      setResult(result);\n    }\n  }\n\n  //Flag for DrawArea reference\n  const changeFlag = () => {\n    setFlag(\"\");\n  }\n\n  //Redo functionality\n  const redo = () => {\n    let top = redoStack.pop();\n    if(top)\n    {\n      if(top.type === \"freehand\")\n      {\n        //Flag for DrawArea reference\n        setFlag(\"redo\");\n      }\n      setResult(res => [...res,top]);\n    }\n  }\n\n  const getPaths = (el) => {\n    setResult(res => [...res,el]);\n  }\n\n  const getBounds = (obj) =>{\n    setBounds(obj);\n  }\n\n  const generateKey = (pre) => {\n    return `${ pre }_${ new Date().getTime() }`;\n  }\n\n  const onTextChange = (id, txt, ref) => {\n    let indx = result.findIndex(x => x.id === id);\n    let item = {...result[indx]};\n    item.text = txt;\n    item.ref = ref;\n    result[indx] = item;\n    setResult(result);\n  }\n\n  const changeButtonType = (type) => {\n    setButtonType(type);\n  }\n\n  const resetButtonType = () => {\n    setButtonType(\"\");\n  }\n\n  return (\n    <div className=\"App\" >\n    {\n      result.map((res) => {\n        if(res.type === \"text\")\n        {\n          let isShowing = \"hidden\";\n          if(res.page === pageNumber)\n          {\n            isShowing = \"visible\";\n          }\n          return(\n            <AutoTextArea key = {res.id} unique_key = {res.id} val = {res.text} onTextChange = {onTextChange} style = {{visibility: isShowing, color: \"red\" ,fontWeight:'normal', fontSize: 16, zIndex:20, position: \"absolute\", left: res.x+'px', top: res.y +'px'}}></AutoTextArea>\n            //<h1 key={index} style = {{textAlign: \"justify\",color: \"red\" ,fontWeight:'normal',width: 200, height: 80,fontSize: 33+'px', fontSize: 16, zIndex:10, position: \"absolute\", left: res.x+'px', top: res.y +'px'}}>{res.text}</h1>\n          )\n        }\n        else\n        {\n          return(null);\n        }\n      })\n    }\n      \n      <h1 style = {{color: \"#3f51b5\"}}>REACT PDF EDITOR</h1>\n\n      <hr/>\n      \n            \n      <div className=\"navbar\">\n        <button onClick = {undo} style = {{marginTop: \"1%\", marginBottom: \"1%\"}}><i style ={{fontSize: 25}} className=\"fa fa-fw fa-undo\"></i></button> \n        <button onClick = {redo} style = {{marginTop: \"1%\", marginBottom: \"1%\"}}><i style ={{fontSize: 25}} className=\"fa fa-fw fa-redo\"></i></button> \n        <button onClick = {addText} style = {{marginTop: \"1%\", marginBottom: \"1%\"}}><i style ={{fontSize: 25}} className=\"fa fa-fw fa-text\"></i></button>\n        <button onClick = {() => changeButtonType(\"draw\")} style = {{marginTop: \"1%\", marginBottom: \"1%\"}}><i style ={{fontSize: 25}} className=\"fa fa-fw fa-pencil\"></i></button>\n        <button onClick = {() => changeButtonType(\"download\")} style = {{marginTop: \"1%\", marginBottom: \"1%\"}}><i style ={{fontSize: 25}} className=\"fa fa-fw fa-download\"></i></button>\n      </div>\n\n{/* \n      <button onClick = {undo} style = {{marginTop: \"1%\"}}>Undo</button>\n      <button onClick = {redo} style = {{marginTop: \"1%\"}}>Redo</button>\n      <br></br>\n      <button onClick={addText} style = {{marginTop: \"1%\"}}>Add Text</button>*/}\n      <SinglePage resetButtonType = {resetButtonType} buttonType = {buttonType} cursor = {isText ? \"text\": \"default\"} pdf = {samplePDF} pageChange = {pageChange} getPaths = {getPaths} flag = {flag} getBounds ={getBounds} changeFlag = {changeFlag}/>\n      <ModifyPage resetButtonType = {resetButtonType} buttonType = {buttonType} pdf = {samplePDF} result = {result} bounds = {bounds}/>\n      <hr></hr>\n      \n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}